#!/bin/bash
# change to the repository root folder via the scripts location
cd "$(dirname "$0")"/../..
########################################
set -x  # output all commands
set -o  pipefail
set -e  # exit on immediately on every error
set -u  # error on usage of undefined variables
########################################

docker build --tag mlreef-nautilus:latest -f Dockerfile .



docker run -it --detach --rm --name mlreef    \
  --publish 2022:22          \
  --publish 80:80            \
  --publish 5050:5050        \
  --publish 5432:5432        \
  --publish 6000:6000        \
  --publish 8080:8080        \
  --publish 10080:10080      \
  mlreef-nautilus:latest


# docker logs -f mlreef
# docker kill mlreef
# docker ps
# ./nautilus/bin/ci-test-build && docker logs -f mlreef; docker kill mlreef
