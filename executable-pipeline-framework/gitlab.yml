# https://gitlab.com/gitlab-org/gitlab-ce/tree/master/lib/gitlab/ci/templates/Python.gitlab-ci.yml
image: python:3.7
#image: tensorflow/tensorflow:latest-py3

variables:
  # Change pip's cache directory to be inside the project directory since we can only cache local items.
  PIP_CACHE_DIR: "$CI_PROJECT_DIR/.cache/pip"

cache:
  key: one-key-to-rule-them-all-2
  paths:
    - .cache/pip
    - venv/
    
before_script:
  - python3 --version
  - pip3 --version
  - python -m pip install --upgrade --force pip
  - echo $PIP_CACHE_DIR
  # Switch Python to virtualenv "venv"
  - pip install virtualenv
  - virtualenv venv --distribute
  - source venv/bin/activate


test:
  script:
    - pip install vergeml
    - pip install --upgrade tensorflow
    - pwd
    - ls -al
    - ml new catsdogs --model imagenet
    - cd catsdogs
    - ml download:cats-and-dogs
    - ml train

